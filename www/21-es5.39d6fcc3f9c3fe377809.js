!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var r=0;r<o.length;r++){var i=o[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{oXFs:function(r,i,n){"use strict";n.r(i),n.d(i,"RecogerOxigemPageModule",(function(){return Z}));var t=n("ofXK"),a=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),b=n("mrSG"),l=n("gcOT"),p=n("fXoL"),u=n("qMNJ"),f=n("6uu6"),m=n("fBZb"),g=n("aOlj"),d=n("Gdqo"),h=n("ZkMX");function v(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function M(e,o){if(1&e&&(p.Kb(0),p.jc(1,v,3,1,"ion-text",17),p.Jb()),2&e){var r=o.$implicit,i=p.Wb();p.xb(1),p.Zb("ngIf",i.form_persona.get("personaTipoIdentificacion").hasError(r.type)&&(i.form_persona.get("personaTipoIdentificacion").dirty||i.form_persona.get("personaTipoIdentificacion").touched))}}function L(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function _(e,o){if(1&e&&(p.Kb(0),p.jc(1,L,3,1,"ion-text",20),p.Jb()),2&e){var r=o.$implicit,i=p.Wb();p.xb(1),p.Zb("ngIf",i.form_persona.get("personaIdentificacion").hasError(r.type)&&(i.form_persona.get("personaIdentificacion").dirty||i.form_persona.get("personaIdentificacion").touched))}}function x(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function I(e,o){if(1&e&&(p.Kb(0),p.jc(1,x,3,1,"ion-text",20),p.Jb()),2&e){var r=o.$implicit,i=p.Wb(2);p.xb(1),p.Zb("ngIf",i.form_registrar_persona.get("personaNombres").hasError(r.type)&&(i.form_registrar_persona.get("personaNombres").dirty||i.form_registrar_persona.get("personaNombres").touched))}}function y(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function E(e,o){if(1&e&&(p.Kb(0),p.jc(1,y,3,1,"ion-text",20),p.Jb()),2&e){var r=o.$implicit,i=p.Wb(2);p.xb(1),p.Zb("ngIf",i.form_registrar_persona.get("personaApellidos").hasError(r.type)&&(i.form_registrar_persona.get("personaApellidos").dirty||i.form_registrar_persona.get("personaApellidos").touched))}}function C(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function k(e,o){if(1&e&&(p.Kb(0),p.jc(1,C,3,1,"ion-text",20),p.Jb()),2&e){var r=o.$implicit,i=p.Wb(2);p.xb(1),p.Zb("ngIf",i.form_registrar_persona.get("personaCelular").hasError(r.type)&&(i.form_registrar_persona.get("personaCelular").dirty||i.form_registrar_persona.get("personaCelular").touched))}}function q(e,o){if(1&e&&(p.Mb(0,"ion-text",18),p.Ib(1,"ion-icon",19),p.kc(2),p.Lb()),2&e){var r=p.Wb().$implicit;p.xb(2),p.mc(" ",r.message," ")}}function w(e,o){if(1&e&&(p.Kb(0),p.jc(1,q,3,1,"ion-text",20),p.Jb()),2&e){var r=o.$implicit,i=p.Wb(2);p.xb(1),p.Zb("ngIf",i.form_registrar_persona.get("personaCorreoElectronico").hasError(r.type)&&(i.form_registrar_persona.get("personaCorreoElectronico").dirty||i.form_registrar_persona.get("personaCorreoElectronico").touched))}}function S(e,o){if(1&e&&(p.Mb(0,"ion-grid"),p.Mb(1,"ion-row"),p.Mb(2,"ion-col",5),p.Mb(3,"strong"),p.kc(4,"Datos Persona "),p.Lb(),p.Lb(),p.Lb(),p.Mb(5,"ion-row"),p.Mb(6,"ion-col",6),p.Mb(7,"form",21),p.Mb(8,"ion-item"),p.Mb(9,"ion-label",8),p.kc(10,"Nombres"),p.Lb(),p.Ib(11,"ion-input",22),p.Lb(),p.Mb(12,"div",12),p.jc(13,I,2,1,"ng-container",13),p.Lb(),p.Mb(14,"ion-item"),p.Mb(15,"ion-label",8),p.kc(16,"Apellidos"),p.Lb(),p.Ib(17,"ion-input",23),p.Lb(),p.Mb(18,"div",12),p.jc(19,E,2,1,"ng-container",13),p.Lb(),p.Mb(20,"ion-item"),p.Mb(21,"ion-label",8),p.kc(22,"Numero celular"),p.Lb(),p.Ib(23,"ion-input",24),p.Lb(),p.Mb(24,"div",12),p.jc(25,k,2,1,"ng-container",13),p.Lb(),p.Mb(26,"ion-item"),p.Mb(27,"ion-label",8),p.kc(28,"Correo electronico"),p.Lb(),p.Ib(29,"ion-input",25),p.Lb(),p.Mb(30,"div",12),p.jc(31,w,2,1,"ng-container",13),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Lb()),2&e){var r=p.Wb();p.xb(7),p.Zb("formGroup",r.form_registrar_persona),p.xb(6),p.Zb("ngForOf",r.validation_messages.personaNombres),p.xb(6),p.Zb("ngForOf",r.validation_messages.personaApellidos),p.xb(6),p.Zb("ngForOf",r.validation_messages.personaCelular),p.xb(6),p.Zb("ngForOf",r.validation_messages.personaCorreoElectronico)}}function N(e,o){if(1&e){var r=p.Nb();p.Mb(0,"ion-grid"),p.Mb(1,"ion-row"),p.Mb(2,"ion-col",5),p.Mb(3,"p"),p.kc(4,"Firma"),p.Lb(),p.Mb(5,"app-firma",26),p.Ub("firmaBase64Event",(function(e){return p.gc(r),p.Wb().firmaBase64Event(e)})),p.Lb(),p.Lb(),p.Lb(),p.Mb(6,"ion-row"),p.Mb(7,"ion-col",5),p.Mb(8,"ion-list"),p.Mb(9,"ion-item"),p.Mb(10,"ion-label"),p.kc(11,"Nos autoriza para utilizar su firma en los procesos necesarios del servicio."),p.Lb(),p.Mb(12,"ion-checkbox",27),p.Ub("ngModelChange",(function(e){return p.gc(r),p.Wb().permisosFirma=e}))("ionChange",(function(){return p.gc(r),p.Wb().permisoFirma()})),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Mb(13,"ion-row"),p.Mb(14,"ion-col",5),p.Mb(15,"ion-button",28),p.Ub("click",(function(){return p.gc(r),p.Wb().recogido()})),p.kc(16," Recogido "),p.Lb(),p.Lb(),p.Lb(),p.Lb()}if(2&e){var i=p.Wb();p.xb(12),p.Zb("ngModel",i.permisosFirma),p.xb(3),p.Zb("disabled",!i.form_registrar_persona.valid)}}var A,T,O,P=[{path:"",component:(A=function(){function r(o,i,n,t,a,s,c,b){e(this,r),this.DatosServicioService=o,this.AuthService=i,this.formBuilder=n,this.DatosEquiposService=t,this.Router=a,this.BaseService=s,this.Sweetalert=c,this.ActivatedRoute=b,this.codigo="xxxx",this.coordenadas={lat:0,lng:0},this.registrarPersona=!1,this.formularioCompleto=!1,this.personaId="",this.permisosFirma=!1,this.validation_messages={personaTipoIdentificacion:[{type:"required",message:"Tipo de identificaci\xf3n es requerido."}],personaIdentificacion:[{type:"required",message:"Identificaci\xf3n es requerida."}],personaNombres:[{type:"required",message:"Nombres es requerida."}],personaApellidos:[{type:"required",message:"Apellidos es requerida."}],personaCelular:[{type:"required",message:"Celular es requerida."}],personaCorreoElectronico:[{type:"required",message:"Correo es requerida."}]}}var i,n,t;return i=r,(n=[{key:"ngOnInit",value:function(){var e=this;this.equipos=this.DatosEquiposService.getEquipos(),this.equipos.length?(console.log("ingresando a recoger"),console.log(this.equipos)):(this.Sweetalert.notificacion("info","Datos Insuficientes."),this.Router.navigateByUrl("menu-principal")),this.form_persona=this.formBuilder.group({personaTipoIdentificacion:new a.b("1",a.l.compose([a.l.required])),personaIdentificacion:new a.b("",a.l.compose([a.l.required]))}),this.form_registrar_persona=this.formBuilder.group({personaNombres:new a.b("",a.l.compose([a.l.required])),personaApellidos:new a.b("",a.l.compose([a.l.required])),personaCelular:new a.b("",a.l.compose([a.l.required])),personaCorreoElectronico:new a.b("",a.l.compose([a.l.required]))}),l.a.Geolocation.getCurrentPosition().then((function(o){console.log(o),e.coordenadas.lat=o.coords.latitude,e.coordenadas.lng=o.coords.longitude})),this.form_persona.get("personaIdentificacion").valueChanges.subscribe((function(o){e.registrarPersona=!1,e.formularioCompleto=!1}))}},{key:"irRuta",value:function(e){this.Router.navigateByUrl(e)}},{key:"buscarPersona",value:function(e){var o=this;this.registrarPersona=!1,this.formularioCompleto=!1;var r=this.BaseService.presentLoading();this.BaseService.postJson("personas","directorio","validarExistenciaPersonaApi",e).subscribe((function(e){console.log(e),"EXITO"==e.RESPUESTA?(o.formularioCompleto=!0,o.registrarPersona=!0,o.personaId=e.DATOS.personaId,o.form_registrar_persona.controls.personaNombres.setValue(e.DATOS.personaNombres),o.form_registrar_persona.controls.personaApellidos.setValue(e.DATOS.personaApellidos),o.form_registrar_persona.controls.personaCelular.setValue(e.DATOS.personaCelular),o.form_registrar_persona.controls.personaCorreoElectronico.setValue(e.DATOS.personaCorreoElectronico)):"INFO"==e.RESPUESTA?(o.formularioCompleto=!0,o.registrarPersona=!0,o.personaId="",o.form_registrar_persona.controls.personaNombres.setValue(""),o.form_registrar_persona.controls.personaApellidos.setValue(""),o.form_registrar_persona.controls.personaCelular.setValue(""),o.form_registrar_persona.controls.personaCorreoElectronico.setValue("")):(o.Sweetalert.modal("error",e.MENSAJE),o.personaId=""),r.then((function(e){e.dismiss()}))}))}},{key:"takePicture",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.Camera.getPhoto({quality:90,allowEditing:!0,resultType:l.a.CameraResultType.Uri});case 2:o=e.sent,console.log(o);case 4:case"end":return e.stop()}}),e)})))}},{key:"recogido",value:function(){var e=this;if(this.permisosFirma&&this.firmaBase64&&this.equipos.length>0){var o=Object.assign(this.form_registrar_persona.value,this.form_persona.value);o.personaId=this.personaId;var r=this.equipos.map((function(e){return{equipoID:e.equipoId,clienteID:e.clienteId,clientePersona:e.clientePersona,estadoEntregaEquipo:e.estadoEntregaEquipo}})),i={firmaBase64:this.firmaBase64,coordenadas:this.coordenadas,equipos:r,persona:o};console.log(i);var n=this.BaseService.presentLoading();this.BaseService.postJson("repartidores","recogerEquipos","registrarRecogidaEquipos",i).subscribe((function(o){console.log(o),(o.RESPUESTA="EXITO")?(e.DatosEquiposService.deleteEquipos(),e.Sweetalert.notificacion("success","Recolecci\xf3n exitosa"),e.DatosServicioService.setRecibosServico(o.DATOS),e.Router.navigateByUrl("recibos-servicios")):e.Sweetalert.modal("error",o.MENSAJE),n.then((function(e){e.dismiss()}))}))}else this.Sweetalert.modal("info","Datos insuficientes para la operaci\xf3n.")}},{key:"firmaBase64Event",value:function(e){this.firmaBase64=e}},{key:"permisoFirma",value:function(){console.log(this.permisosFirma)}}])&&o(i.prototype,n),t&&o(i,t),r}(),A.\u0275fac=function(e){return new(e||A)(p.Hb(u.a),p.Hb(f.a),p.Hb(a.a),p.Hb(m.a),p.Hb(c.g),p.Hb(g.a),p.Hb(d.a),p.Hb(c.a))},A.\u0275cmp=p.Bb({type:A,selectors:[["app-recoger-oxigem"]],decls:39,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["icon","chevron-back","defaultHref",""],[3,"fullscreen"],["size","12",2,"text-align","center"],["size","12"],["size","12",1,"text-center"],[3,"formGroup","ngSubmit"],["position","floating","color","primary"],["formControlName","personaTipoIdentificacion","placeholder","Seleccione"],["value","1"],["value","2"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","formControlName","personaIdentificacion"],["color","primary","expand","full","type","submit",1,"submit-btn",2,"margin-top","50px",3,"disabled"],[4,"ngIf"],["color","danger","style","display:block;float: none;\n                  width: 100%","class","error-message",4,"ngIf"],["color","danger",1,"error-message",2,"display","block","float","none","width","100%"],["name","information-circle-outline"],["color","danger","style","display:block;float: none;\n                width: 100%","class","error-message",4,"ngIf"],[3,"formGroup"],["type","text","formControlName","personaNombres"],["type","text","formControlName","personaApellidos"],["type","text","formControlName","personaCelular"],["type","text","formControlName","personaCorreoElectronico"],[3,"firmaBase64Event"],["slot","start","color","success",3,"ngModel","ngModelChange","ionChange"],["expand","block","shape","round","color","success",3,"disabled","click"]],template:function(e,o){1&e&&(p.Mb(0,"ion-header",0),p.Mb(1,"ion-toolbar"),p.Mb(2,"ion-buttons",1),p.Ib(3,"ion-back-button",2),p.Lb(),p.Mb(4,"ion-title"),p.kc(5,"Recoger Equipo"),p.Lb(),p.Lb(),p.Lb(),p.Mb(6,"ion-content",3),p.Kb(7),p.Mb(8,"ion-grid"),p.Mb(9,"ion-row"),p.Mb(10,"ion-col",4),p.kc(11),p.Lb(),p.Lb(),p.Mb(12,"ion-row"),p.Mb(13,"ion-col",5),p.Mb(14,"strong"),p.kc(15,"Persona que entrega los equipos."),p.Lb(),p.Lb(),p.Lb(),p.Mb(16,"ion-row"),p.Mb(17,"ion-col",6),p.Mb(18,"form",7),p.Ub("ngSubmit",(function(){return o.buscarPersona(o.form_persona.value)})),p.Mb(19,"ion-item"),p.Mb(20,"ion-label",8),p.kc(21,"Tipo identificaci\xf3n"),p.Lb(),p.Mb(22,"ion-select",9),p.Mb(23,"ion-select-option",10),p.kc(24,"CC"),p.Lb(),p.Mb(25,"ion-select-option",11),p.kc(26,"NIT"),p.Lb(),p.Lb(),p.Lb(),p.Mb(27,"div",12),p.jc(28,M,2,1,"ng-container",13),p.Lb(),p.Mb(29,"ion-item"),p.Mb(30,"ion-label",8),p.kc(31,"Identificaci\xf3n"),p.Lb(),p.Ib(32,"ion-input",14),p.Lb(),p.Mb(33,"div",12),p.jc(34,_,2,1,"ng-container",13),p.Lb(),p.Mb(35,"ion-button",15),p.kc(36,"Buscar"),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.Lb(),p.jc(37,S,32,5,"ion-grid",16),p.jc(38,N,17,2,"ion-grid",16),p.Jb(),p.Lb()),2&e&&(p.xb(6),p.Zb("fullscreen",!0),p.xb(5),p.mc(" ",o.equipos.length," Equipos a recoger "),p.xb(7),p.Zb("formGroup",o.form_persona),p.xb(10),p.Zb("ngForOf",o.validation_messages.personaTipoIdentificacion),p.xb(6),p.Zb("ngForOf",o.validation_messages.personaIdentificacion),p.xb(1),p.Zb("disabled",!o.form_persona.valid),p.xb(2),p.Zb("ngIf",o.registrarPersona),p.xb(1),p.Zb("ngIf",o.formularioCompleto))},directives:[s.r,s.O,s.h,s.d,s.e,s.N,s.p,s.q,s.I,s.o,a.m,a.i,a.d,s.x,s.y,s.K,s.V,a.h,a.c,s.L,t.i,s.w,s.W,s.g,t.j,s.M,s.s,h.a,s.z,s.n,s.a,a.j],styles:[""]}),A)}],j=((T=function o(){e(this,o)}).\u0275mod=p.Fb({type:T}),T.\u0275inj=p.Eb({factory:function(e){return new(e||T)},imports:[[c.i.forChild(P)],c.i]}),T),B=n("ONSf"),Z=((O=function o(){e(this,o)}).\u0275mod=p.Fb({type:O}),O.\u0275inj=p.Eb({factory:function(e){return new(e||O)},providers:[],imports:[[t.b,a.e,s.P,j,B.a,a.k]]}),O)}}])}();