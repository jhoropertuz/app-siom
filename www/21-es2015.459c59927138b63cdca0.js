(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{KjE0:function(e,o,r){"use strict";r.r(o),r.d(o,"EntregaOxigemPageModule",(function(){return P}));var i=r("ofXK"),n=r("3Pt+"),t=r("TEn/"),s=r("tyNb"),a=r("mrSG"),c=r("gcOT"),b=r("fXoL"),l=r("qMNJ"),p=r("6uu6"),g=r("fBZb"),m=r("aOlj"),u=r("Gdqo"),d=r("ZkMX");function f(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function h(e,o){if(1&e&&(b.Kb(0),b.jc(1,f,3,1,"ion-text",17),b.Jb()),2&e){const e=o.$implicit,r=b.Wb();b.xb(1),b.Zb("ngIf",r.form_persona_entrega.get("personaTipoIdentificacion").hasError(e.type)&&(r.form_persona_entrega.get("personaTipoIdentificacion").dirty||r.form_persona_entrega.get("personaTipoIdentificacion").touched))}}function _(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function M(e,o){if(1&e&&(b.Kb(0),b.jc(1,_,3,1,"ion-text",20),b.Jb()),2&e){const e=o.$implicit,r=b.Wb();b.xb(1),b.Zb("ngIf",r.form_persona_entrega.get("personaIdentificacion").hasError(e.type)&&(r.form_persona_entrega.get("personaIdentificacion").dirty||r.form_persona_entrega.get("personaIdentificacion").touched))}}function L(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function I(e,o){if(1&e&&(b.Kb(0),b.jc(1,L,3,1,"ion-text",20),b.Jb()),2&e){const e=o.$implicit,r=b.Wb(2);b.xb(1),b.Zb("ngIf",r.form_registrar_persona_entrega.get("personaNombres").hasError(e.type)&&(r.form_registrar_persona_entrega.get("personaNombres").dirty||r.form_registrar_persona_entrega.get("personaNombres").touched))}}function x(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function E(e,o){if(1&e&&(b.Kb(0),b.jc(1,x,3,1,"ion-text",20),b.Jb()),2&e){const e=o.$implicit,r=b.Wb(2);b.xb(1),b.Zb("ngIf",r.form_registrar_persona_entrega.get("personaApellidos").hasError(e.type)&&(r.form_registrar_persona_entrega.get("personaApellidos").dirty||r.form_registrar_persona_entrega.get("personaApellidos").touched))}}function v(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function q(e,o){if(1&e&&(b.Kb(0),b.jc(1,v,3,1,"ion-text",20),b.Jb()),2&e){const e=o.$implicit,r=b.Wb(2);b.xb(1),b.Zb("ngIf",r.form_registrar_persona_entrega.get("personaCelular").hasError(e.type)&&(r.form_registrar_persona_entrega.get("personaCelular").dirty||r.form_registrar_persona_entrega.get("personaCelular").touched))}}function y(e,o){if(1&e&&(b.Mb(0,"ion-text",18),b.Ib(1,"ion-icon",19),b.kc(2),b.Lb()),2&e){const e=b.Wb().$implicit;b.xb(2),b.mc(" ",e.message," ")}}function C(e,o){if(1&e&&(b.Kb(0),b.jc(1,y,3,1,"ion-text",20),b.Jb()),2&e){const e=o.$implicit,r=b.Wb(2);b.xb(1),b.Zb("ngIf",r.form_registrar_persona_entrega.get("personaCorreoElectronico").hasError(e.type)&&(r.form_registrar_persona_entrega.get("personaCorreoElectronico").dirty||r.form_registrar_persona_entrega.get("personaCorreoElectronico").touched))}}function S(e,o){if(1&e&&(b.Mb(0,"ion-grid"),b.Mb(1,"ion-row"),b.Mb(2,"ion-col",5),b.Mb(3,"strong"),b.kc(4,"Datos Persona "),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"ion-row"),b.Mb(6,"ion-col",6),b.Mb(7,"form",21),b.Mb(8,"ion-item"),b.Mb(9,"ion-label",8),b.kc(10,"Nombres"),b.Lb(),b.Ib(11,"ion-input",22),b.Lb(),b.Mb(12,"div",12),b.jc(13,I,2,1,"ng-container",13),b.Lb(),b.Mb(14,"ion-item"),b.Mb(15,"ion-label",8),b.kc(16,"Apellidos"),b.Lb(),b.Ib(17,"ion-input",23),b.Lb(),b.Mb(18,"div",12),b.jc(19,E,2,1,"ng-container",13),b.Lb(),b.Mb(20,"ion-item"),b.Mb(21,"ion-label",8),b.kc(22,"Numero celular"),b.Lb(),b.Ib(23,"ion-input",24),b.Lb(),b.Mb(24,"div",12),b.jc(25,q,2,1,"ng-container",13),b.Lb(),b.Mb(26,"ion-item"),b.Mb(27,"ion-label",8),b.kc(28,"Correo electronico"),b.Lb(),b.Ib(29,"ion-input",25),b.Lb(),b.Mb(30,"div",12),b.jc(31,C,2,1,"ng-container",13),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&e){const e=b.Wb();b.xb(7),b.Zb("formGroup",e.form_registrar_persona_entrega),b.xb(6),b.Zb("ngForOf",e.validation_messages.personaNombres),b.xb(6),b.Zb("ngForOf",e.validation_messages.personaApellidos),b.xb(6),b.Zb("ngForOf",e.validation_messages.personaCelular),b.xb(6),b.Zb("ngForOf",e.validation_messages.personaCorreoElectronico)}}function k(e,o){if(1&e){const e=b.Nb();b.Mb(0,"ion-grid"),b.Mb(1,"ion-row"),b.Mb(2,"ion-col",5),b.Mb(3,"p"),b.kc(4,"Firma"),b.Lb(),b.Mb(5,"app-firma",26),b.Ub("firmaBase64Event",(function(o){return b.gc(e),b.Wb().firmaBase64Event(o)})),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-row"),b.Mb(7,"ion-col",5),b.Mb(8,"ion-list"),b.Mb(9,"ion-item"),b.Mb(10,"ion-label"),b.kc(11,"Nos autoriza para utilizar su firma en los procesos necesarios del servicio."),b.Lb(),b.Mb(12,"ion-checkbox",27),b.Ub("ngModelChange",(function(o){return b.gc(e),b.Wb().permisosFirma=o}))("ionChange",(function(){return b.gc(e),b.Wb().permisoFirma()})),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(13,"ion-row",28),b.Mb(14,"ion-col",5),b.Mb(15,"ion-button",29),b.Ub("click",(function(){return b.gc(e),b.Wb().entregar()})),b.kc(16," Entregar "),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&e){const e=b.Wb();b.xb(12),b.Zb("ngModel",e.permisosFirma),b.xb(3),b.Zb("disabled",!e.form_registrar_persona_entrega.valid)}}const w=[{path:"",component:(()=>{class e{constructor(e,o,r,i,n,t,s,a){this.DatosServicioService=e,this.AuthService=o,this.formBuilder=r,this.DatosEquiposService=i,this.Router=n,this.BaseService=t,this.Sweetalert=s,this.ActivatedRoute=a,this.codigo="xxxx",this.coordenadas={lat:0,lng:0},this.registrarPersona=!1,this.formularioCompleto=!1,this.personaId="",this.permisosFirma=!1,this.validation_messages={personaTipoIdentificacion:[{type:"required",message:"Tipo de identificaci\xf3n es requerido."}],personaIdentificacion:[{type:"required",message:"Identificaci\xf3n es requerida."}],personaNombres:[{type:"required",message:"Nombres es requerida."}],personaApellidos:[{type:"required",message:"Apellidos es requerida."}],personaCelular:[{type:"required",message:"Celular es requerida."}],personaCorreoElectronico:[{type:"required",message:"Correo es requerida."}]}}ngOnInit(){this.equipos=this.DatosEquiposService.getEquipos(),this.equipos.length?(this.equipos[0].otrosPendientes&&this.equipos[0].otrosPendientes.forEach(e=>{this.equipos.push(e)}),console.log("ingresando a recoger"),console.log(this.equipos)):(this.Sweetalert.notificacion("info","Datos Insuficientes."),this.Router.navigateByUrl("menu-principal")),this.form_persona_entrega=this.formBuilder.group({personaTipoIdentificacion:new n.b("1",n.l.compose([n.l.required])),personaIdentificacion:new n.b("",n.l.compose([n.l.required]))}),this.form_registrar_persona_entrega=this.formBuilder.group({personaNombres:new n.b("",n.l.compose([n.l.required])),personaApellidos:new n.b("",n.l.compose([n.l.required])),personaCelular:new n.b("",n.l.compose([n.l.required])),personaCorreoElectronico:new n.b("",n.l.compose([n.l.required]))}),c.a.Geolocation.getCurrentPosition().then(e=>{console.log(e),this.coordenadas.lat=e.coords.latitude,this.coordenadas.lng=e.coords.longitude}),this.form_persona_entrega.get("personaIdentificacion").valueChanges.subscribe(e=>{this.registrarPersona=!1,this.formularioCompleto=!1})}irRuta(e){this.Router.navigateByUrl(e)}buscarPersona(e){this.registrarPersona=!1,this.formularioCompleto=!1;let o=this.BaseService.presentLoading();this.BaseService.postJson("personas","directorio","validarExistenciaPersonaApi",e).subscribe(e=>{console.log(e),"EXITO"==e.RESPUESTA?(this.formularioCompleto=!0,this.registrarPersona=!0,this.personaId=e.DATOS.personaId,this.form_registrar_persona_entrega.controls.personaNombres.setValue(e.DATOS.personaNombres),this.form_registrar_persona_entrega.controls.personaApellidos.setValue(e.DATOS.personaApellidos),this.form_registrar_persona_entrega.controls.personaCelular.setValue(e.DATOS.personaCelular),this.form_registrar_persona_entrega.controls.personaCorreoElectronico.setValue(e.DATOS.personaCorreoElectronico)):"INFO"==e.RESPUESTA?(this.formularioCompleto=!0,this.registrarPersona=!0,this.personaId="",this.form_registrar_persona_entrega.controls.personaNombres.setValue(""),this.form_registrar_persona_entrega.controls.personaApellidos.setValue(""),this.form_registrar_persona_entrega.controls.personaCelular.setValue(""),this.form_registrar_persona_entrega.controls.personaCorreoElectronico.setValue("")):(this.Sweetalert.modal("error",e.MENSAJE),this.personaId=""),o.then(e=>{e.dismiss()})})}takePicture(){return Object(a.a)(this,void 0,void 0,(function*(){let e=yield c.a.Camera.getPhoto({quality:90,allowEditing:!0,resultType:c.a.CameraResultType.Uri});console.log(e)}))}entregar(){if(this.permisosFirma&&this.firmaBase64&&this.equipos.length>0){let e=Object.assign(this.form_registrar_persona_entrega.value,this.form_persona_entrega.value);e.personaId=this.personaId;let o=this.equipos[0].reciboId,r=this.equipos.map(e=>({equipoID:e.equipoId,clienteID:e.clienteId,clientePersona:e.clientePersona,estadoEntregaEquipo:e.estadoEntregaEquipo})),i={reciboID:o,firmaBase64:this.firmaBase64,coordenadas:this.coordenadas,equipos:r,persona:e};console.log(i);let n=this.BaseService.presentLoading();this.BaseService.postJson("repartidores","entregarEquipos","registrarEntregaEquiposPorRecibo",i).subscribe(e=>{console.log(e),(e.RESPUESTA="EXITO")?(this.DatosEquiposService.deleteEquipos(),this.Sweetalert.notificacion("success","Recolecci\xf3n exitosa"),this.DatosServicioService.setRecibosServico(e.DATOS),this.Router.navigateByUrl("recibos-servicios")):this.Sweetalert.modal("error",e.MENSAJE),n.then(e=>{e.dismiss()})})}else this.Sweetalert.modal("info","Datos insuficientes para la operaci\xf3n.")}firmaBase64Event(e){this.firmaBase64=e}permisoFirma(){console.log(this.permisosFirma)}}return e.\u0275fac=function(o){return new(o||e)(b.Hb(l.a),b.Hb(p.a),b.Hb(n.a),b.Hb(g.a),b.Hb(s.g),b.Hb(m.a),b.Hb(u.a),b.Hb(s.a))},e.\u0275cmp=b.Bb({type:e,selectors:[["app-entrega-oxigem"]],decls:39,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["icon","chevron-back","defaultHref",""],[3,"fullscreen"],["size","12",2,"text-align","center"],["size","12"],["size","12",1,"text-center"],[3,"formGroup","ngSubmit"],["position","floating","color","primary"],["formControlName","personaTipoIdentificacion","placeholder","Seleccione"],["value","1"],["value","2"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","formControlName","personaIdentificacion"],["color","primary","expand","full","type","submit",1,"submit-btn",2,"margin-top","50px",3,"disabled"],[4,"ngIf"],["color","danger","style","display:block;float: none;\n                  width: 100%","class","error-message",4,"ngIf"],["color","danger",1,"error-message",2,"display","block","float","none","width","100%"],["name","information-circle-outline"],["color","danger","style","display:block;float: none;\n                width: 100%","class","error-message",4,"ngIf"],[3,"formGroup"],["type","text","formControlName","personaNombres"],["type","text","formControlName","personaApellidos"],["type","text","formControlName","personaCelular"],["type","text","formControlName","personaCorreoElectronico"],[3,"firmaBase64Event"],["slot","start","color","success",3,"ngModel","ngModelChange","ionChange"],[2,"margin-bottom","20%"],["expand","block","shape","round","color","success",3,"disabled","click"]],template:function(e,o){1&e&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-buttons",1),b.Ib(3,"ion-back-button",2),b.Lb(),b.Mb(4,"ion-title"),b.kc(5,"Entregar Equipos"),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",3),b.Kb(7),b.Mb(8,"ion-grid"),b.Mb(9,"ion-row"),b.Mb(10,"ion-col",4),b.kc(11),b.Lb(),b.Lb(),b.Mb(12,"ion-row"),b.Mb(13,"ion-col",5),b.Mb(14,"strong"),b.kc(15,"Persona a quien se le entrega."),b.Lb(),b.Lb(),b.Lb(),b.Mb(16,"ion-row"),b.Mb(17,"ion-col",6),b.Mb(18,"form",7),b.Ub("ngSubmit",(function(){return o.buscarPersona(o.form_persona_entrega.value)})),b.Mb(19,"ion-item"),b.Mb(20,"ion-label",8),b.kc(21,"Tipo identificaci\xf3n"),b.Lb(),b.Mb(22,"ion-select",9),b.Mb(23,"ion-select-option",10),b.kc(24,"CC"),b.Lb(),b.Mb(25,"ion-select-option",11),b.kc(26,"NIT"),b.Lb(),b.Lb(),b.Lb(),b.Mb(27,"div",12),b.jc(28,h,2,1,"ng-container",13),b.Lb(),b.Mb(29,"ion-item"),b.Mb(30,"ion-label",8),b.kc(31,"Identificaci\xf3n"),b.Lb(),b.Ib(32,"ion-input",14),b.Lb(),b.Mb(33,"div",12),b.jc(34,M,2,1,"ng-container",13),b.Lb(),b.Mb(35,"ion-button",15),b.kc(36,"Buscar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.jc(37,S,32,5,"ion-grid",16),b.jc(38,k,17,2,"ion-grid",16),b.Jb(),b.Lb()),2&e&&(b.xb(6),b.Zb("fullscreen",!0),b.xb(5),b.mc(" ",o.equipos.length," Equipos a Entregar "),b.xb(7),b.Zb("formGroup",o.form_persona_entrega),b.xb(10),b.Zb("ngForOf",o.validation_messages.personaTipoIdentificacion),b.xb(6),b.Zb("ngForOf",o.validation_messages.personaIdentificacion),b.xb(1),b.Zb("disabled",!o.form_persona_entrega.valid),b.xb(2),b.Zb("ngIf",o.registrarPersona),b.xb(1),b.Zb("ngIf",o.formularioCompleto))},directives:[t.r,t.O,t.h,t.d,t.e,t.N,t.p,t.q,t.I,t.o,n.m,n.i,n.d,t.x,t.y,t.K,t.V,n.h,n.c,t.L,i.i,t.w,t.W,t.g,i.j,t.M,t.s,d.a,t.z,t.n,t.a,n.j],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(o){return new(o||e)},imports:[[s.i.forChild(w)],s.i]}),e})();var A=r("ONSf");let P=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(o){return new(o||e)},imports:[[i.b,n.e,t.P,N,A.a,n.k]]}),e})()}}]);