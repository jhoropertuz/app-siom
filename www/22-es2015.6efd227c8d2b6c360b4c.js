(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{oXFs:function(e,o,r){"use strict";r.r(o),r.d(o,"RecogerOxigemPageModule",(function(){return T}));var i=r("ofXK"),n=r("3Pt+"),s=r("TEn/"),t=r("tyNb"),a=r("mrSG"),c=r("gcOT"),l=r("fXoL"),b=r("qMNJ"),p=r("6uu6"),m=r("fBZb"),u=r("aOlj"),d=r("Gdqo"),f=r("ZkMX");function g(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function h(e,o){if(1&e&&(l.Lb(0),l.kc(1,g,3,1,"ion-text",17),l.Kb()),2&e){const e=o.$implicit,r=l.Xb();l.xb(1),l.ac("ngIf",r.form_persona.get("personaTipoIdentificacion").hasError(e.type)&&(r.form_persona.get("personaTipoIdentificacion").dirty||r.form_persona.get("personaTipoIdentificacion").touched))}}function N(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function M(e,o){if(1&e&&(l.Lb(0),l.kc(1,N,3,1,"ion-text",20),l.Kb()),2&e){const e=o.$implicit,r=l.Xb();l.xb(1),l.ac("ngIf",r.form_persona.get("personaIdentificacion").hasError(e.type)&&(r.form_persona.get("personaIdentificacion").dirty||r.form_persona.get("personaIdentificacion").touched))}}function _(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function x(e,o){if(1&e&&(l.Lb(0),l.kc(1,_,3,1,"ion-text",20),l.Kb()),2&e){const e=o.$implicit,r=l.Xb(2);l.xb(1),l.ac("ngIf",r.form_registrar_persona.get("personaNombres").hasError(e.type)&&(r.form_registrar_persona.get("personaNombres").dirty||r.form_registrar_persona.get("personaNombres").touched))}}function v(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function I(e,o){if(1&e&&(l.Lb(0),l.kc(1,v,3,1,"ion-text",20),l.Kb()),2&e){const e=o.$implicit,r=l.Xb(2);l.xb(1),l.ac("ngIf",r.form_registrar_persona.get("personaApellidos").hasError(e.type)&&(r.form_registrar_persona.get("personaApellidos").dirty||r.form_registrar_persona.get("personaApellidos").touched))}}function E(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function C(e,o){if(1&e&&(l.Lb(0),l.kc(1,E,3,1,"ion-text",20),l.Kb()),2&e){const e=o.$implicit,r=l.Xb(2);l.xb(1),l.ac("ngIf",r.form_registrar_persona.get("personaCelular").hasError(e.type)&&(r.form_registrar_persona.get("personaCelular").dirty||r.form_registrar_persona.get("personaCelular").touched))}}function y(e,o){if(1&e&&(l.Nb(0,"ion-text",18),l.Jb(1,"ion-icon",19),l.lc(2),l.Mb()),2&e){const e=l.Xb().$implicit;l.xb(2),l.nc(" ",e.message," ")}}function q(e,o){if(1&e&&(l.Lb(0),l.kc(1,y,3,1,"ion-text",20),l.Kb()),2&e){const e=o.$implicit,r=l.Xb(2);l.xb(1),l.ac("ngIf",r.form_registrar_persona.get("personaCorreoElectronico").hasError(e.type)&&(r.form_registrar_persona.get("personaCorreoElectronico").dirty||r.form_registrar_persona.get("personaCorreoElectronico").touched))}}function S(e,o){if(1&e&&(l.Nb(0,"ion-grid"),l.Nb(1,"ion-row"),l.Nb(2,"ion-col",5),l.Nb(3,"strong"),l.lc(4,"Datos Persona "),l.Mb(),l.Mb(),l.Mb(),l.Nb(5,"ion-row"),l.Nb(6,"ion-col",6),l.Nb(7,"form",21),l.Nb(8,"ion-item"),l.Nb(9,"ion-label",8),l.lc(10,"Nombres"),l.Mb(),l.Jb(11,"ion-input",22),l.Mb(),l.Nb(12,"div",12),l.kc(13,x,2,1,"ng-container",13),l.Mb(),l.Nb(14,"ion-item"),l.Nb(15,"ion-label",8),l.lc(16,"Apellidos"),l.Mb(),l.Jb(17,"ion-input",23),l.Mb(),l.Nb(18,"div",12),l.kc(19,I,2,1,"ng-container",13),l.Mb(),l.Nb(20,"ion-item"),l.Nb(21,"ion-label",8),l.lc(22,"Numero celular"),l.Mb(),l.Jb(23,"ion-input",24),l.Mb(),l.Nb(24,"div",12),l.kc(25,C,2,1,"ng-container",13),l.Mb(),l.Nb(26,"ion-item"),l.Nb(27,"ion-label",8),l.lc(28,"Correo electronico"),l.Mb(),l.Jb(29,"ion-input",25),l.Mb(),l.Nb(30,"div",12),l.kc(31,q,2,1,"ng-container",13),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&e){const e=l.Xb();l.xb(7),l.ac("formGroup",e.form_registrar_persona),l.xb(6),l.ac("ngForOf",e.validation_messages.personaNombres),l.xb(6),l.ac("ngForOf",e.validation_messages.personaApellidos),l.xb(6),l.ac("ngForOf",e.validation_messages.personaCelular),l.xb(6),l.ac("ngForOf",e.validation_messages.personaCorreoElectronico)}}function w(e,o){if(1&e){const e=l.Ob();l.Nb(0,"ion-grid"),l.Nb(1,"ion-row"),l.Nb(2,"ion-col",5),l.Nb(3,"p"),l.lc(4,"Firma"),l.Mb(),l.Nb(5,"app-firma",26),l.Vb("firmaBase64Event",(function(o){return l.hc(e),l.Xb().firmaBase64Event(o)})),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"ion-row"),l.Nb(7,"ion-col",5),l.Nb(8,"ion-list"),l.Nb(9,"ion-item"),l.Nb(10,"ion-label"),l.lc(11,"Nos autoriza para utilizar su firma en los procesos necesarios del servicio."),l.Mb(),l.Nb(12,"ion-checkbox",27),l.Vb("ngModelChange",(function(o){return l.hc(e),l.Xb().permisosFirma=o}))("ionChange",(function(){return l.hc(e),l.Xb().permisoFirma()})),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(13,"ion-row",28),l.Nb(14,"ion-col",5),l.Nb(15,"ion-button",29),l.Vb("click",(function(){return l.hc(e),l.Xb().recogido()})),l.lc(16," Recogido "),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&e){const e=l.Xb();l.xb(12),l.ac("ngModel",e.permisosFirma),l.xb(3),l.ac("disabled",!e.form_registrar_persona.valid)}}const k=[{path:"",component:(()=>{class e{constructor(e,o,r,i,n,s,t,a){this.DatosServicioService=e,this.AuthService=o,this.formBuilder=r,this.DatosEquiposService=i,this.Router=n,this.BaseService=s,this.Sweetalert=t,this.ActivatedRoute=a,this.codigo="xxxx",this.coordenadas={lat:0,lng:0},this.registrarPersona=!1,this.formularioCompleto=!1,this.personaId="",this.permisosFirma=!1,this.validation_messages={personaTipoIdentificacion:[{type:"required",message:"Tipo de identificaci\xf3n es requerido."}],personaIdentificacion:[{type:"required",message:"Identificaci\xf3n es requerida."}],personaNombres:[{type:"required",message:"Nombres es requerida."}],personaApellidos:[{type:"required",message:"Apellidos es requerida."}],personaCelular:[{type:"required",message:"Celular es requerida."}],personaCorreoElectronico:[{type:"required",message:"Correo es requerida."}]}}ngOnInit(){this.equipos=this.DatosEquiposService.getEquipos(),this.equipos.length?(console.log("ingresando a recoger"),console.log(this.equipos)):(this.Sweetalert.notificacion("info","Datos Insuficientes."),this.Router.navigateByUrl("menu-principal")),this.form_persona=this.formBuilder.group({personaTipoIdentificacion:new n.b("1",n.l.compose([n.l.required])),personaIdentificacion:new n.b("",n.l.compose([n.l.required]))}),this.form_registrar_persona=this.formBuilder.group({personaNombres:new n.b("",n.l.compose([n.l.required])),personaApellidos:new n.b("",n.l.compose([n.l.required])),personaCelular:new n.b("",n.l.compose([n.l.required])),personaCorreoElectronico:new n.b("",n.l.compose([n.l.required]))}),c.a.Geolocation.getCurrentPosition().then(e=>{console.log(e),this.coordenadas.lat=e.coords.latitude,this.coordenadas.lng=e.coords.longitude}),this.form_persona.get("personaIdentificacion").valueChanges.subscribe(e=>{this.registrarPersona=!1,this.formularioCompleto=!1})}irRuta(e){this.Router.navigateByUrl(e)}buscarPersona(e){this.registrarPersona=!1,this.formularioCompleto=!1;let o=this.BaseService.presentLoading();this.BaseService.postJson("personas","directorio","validarExistenciaPersonaApi",e).subscribe(e=>{console.log(e),"EXITO"==e.RESPUESTA?(this.formularioCompleto=!0,this.registrarPersona=!0,this.personaId=e.DATOS.personaId,this.form_registrar_persona.controls.personaNombres.setValue(e.DATOS.personaNombres),this.form_registrar_persona.controls.personaApellidos.setValue(e.DATOS.personaApellidos),this.form_registrar_persona.controls.personaCelular.setValue(e.DATOS.personaCelular),this.form_registrar_persona.controls.personaCorreoElectronico.setValue(e.DATOS.personaCorreoElectronico)):"INFO"==e.RESPUESTA?(this.formularioCompleto=!0,this.registrarPersona=!0,this.personaId="",this.form_registrar_persona.controls.personaNombres.setValue(""),this.form_registrar_persona.controls.personaApellidos.setValue(""),this.form_registrar_persona.controls.personaCelular.setValue(""),this.form_registrar_persona.controls.personaCorreoElectronico.setValue("")):(this.Sweetalert.modal("error",e.MENSAJE),this.personaId=""),o.then(e=>{e.dismiss()})})}takePicture(){return Object(a.a)(this,void 0,void 0,(function*(){let e=yield c.a.Camera.getPhoto({quality:90,allowEditing:!0,resultType:c.a.CameraResultType.Uri});console.log(e)}))}recogido(){if(this.permisosFirma&&this.firmaBase64&&this.equipos.length>0){let e=Object.assign(this.form_registrar_persona.value,this.form_persona.value);e.personaId=this.personaId;let o=this.equipos.map(e=>({equipoID:e.equipoId,clienteID:e.clienteId,clientePersona:e.clientePersona,estadoEntregaEquipo:e.estadoEntregaEquipo,reciboReferencia:e.reciboReferencia})),r={firmaBase64:this.firmaBase64,coordenadas:this.coordenadas,equipos:o,persona:e};console.log(r);let i=this.BaseService.presentLoading();this.BaseService.postJson("repartidores","recogerEquipos","registrarRecogidaEquipos",r).subscribe(e=>{console.log(e),(e.RESPUESTA="EXITO")?(this.DatosEquiposService.deleteEquipos(),this.Sweetalert.notificacion("success","Recolecci\xf3n exitosa"),this.DatosServicioService.setRecibosServico(e.DATOS),this.Router.navigateByUrl("recibos-servicios")):this.Sweetalert.modal("error",e.MENSAJE),i.then(e=>{e.dismiss()})})}else this.Sweetalert.modal("info","Datos insuficientes para la operaci\xf3n.")}firmaBase64Event(e){this.firmaBase64=e}permisoFirma(){console.log(this.permisosFirma)}}return e.\u0275fac=function(o){return new(o||e)(l.Ib(b.a),l.Ib(p.a),l.Ib(n.a),l.Ib(m.a),l.Ib(t.g),l.Ib(u.a),l.Ib(d.a),l.Ib(t.a))},e.\u0275cmp=l.Cb({type:e,selectors:[["app-recoger-oxigem"]],decls:39,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["icon","chevron-back","defaultHref",""],[3,"fullscreen"],["size","12",2,"text-align","center"],["size","12"],["size","12",1,"text-center"],[3,"formGroup","ngSubmit"],["position","floating","color","primary"],["formControlName","personaTipoIdentificacion","placeholder","Seleccione"],["value","1"],["value","2"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","formControlName","personaIdentificacion"],["color","primary","expand","full","type","submit",1,"submit-btn",2,"margin-top","50px",3,"disabled"],[4,"ngIf"],["color","danger","style","display:block;float: none;\n                  width: 100%","class","error-message",4,"ngIf"],["color","danger",1,"error-message",2,"display","block","float","none","width","100%"],["name","information-circle-outline"],["color","danger","style","display:block;float: none;\n                width: 100%","class","error-message",4,"ngIf"],[3,"formGroup"],["type","text","formControlName","personaNombres"],["type","text","formControlName","personaApellidos"],["type","text","formControlName","personaCelular"],["type","text","formControlName","personaCorreoElectronico"],[3,"firmaBase64Event"],["slot","start","color","success",3,"ngModel","ngModelChange","ionChange"],[2,"margin-bottom","20%"],["expand","block","shape","round","color","success",3,"disabled","click"]],template:function(e,o){1&e&&(l.Nb(0,"ion-header",0),l.Nb(1,"ion-toolbar"),l.Nb(2,"ion-buttons",1),l.Jb(3,"ion-back-button",2),l.Mb(),l.Nb(4,"ion-title"),l.lc(5,"Recoger Equipo"),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"ion-content",3),l.Lb(7),l.Nb(8,"ion-grid"),l.Nb(9,"ion-row"),l.Nb(10,"ion-col",4),l.lc(11),l.Mb(),l.Mb(),l.Nb(12,"ion-row"),l.Nb(13,"ion-col",5),l.Nb(14,"strong"),l.lc(15,"Persona que entrega los equipos."),l.Mb(),l.Mb(),l.Mb(),l.Nb(16,"ion-row"),l.Nb(17,"ion-col",6),l.Nb(18,"form",7),l.Vb("ngSubmit",(function(){return o.buscarPersona(o.form_persona.value)})),l.Nb(19,"ion-item"),l.Nb(20,"ion-label",8),l.lc(21,"Tipo identificaci\xf3n"),l.Mb(),l.Nb(22,"ion-select",9),l.Nb(23,"ion-select-option",10),l.lc(24,"CC"),l.Mb(),l.Nb(25,"ion-select-option",11),l.lc(26,"NIT"),l.Mb(),l.Mb(),l.Mb(),l.Nb(27,"div",12),l.kc(28,h,2,1,"ng-container",13),l.Mb(),l.Nb(29,"ion-item"),l.Nb(30,"ion-label",8),l.lc(31,"Identificaci\xf3n"),l.Mb(),l.Jb(32,"ion-input",14),l.Mb(),l.Nb(33,"div",12),l.kc(34,M,2,1,"ng-container",13),l.Mb(),l.Nb(35,"ion-button",15),l.lc(36,"Buscar"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.kc(37,S,32,5,"ion-grid",16),l.kc(38,w,17,2,"ion-grid",16),l.Kb(),l.Mb()),2&e&&(l.xb(6),l.ac("fullscreen",!0),l.xb(5),l.nc(" ",o.equipos.length," Equipos a recoger "),l.xb(7),l.ac("formGroup",o.form_persona),l.xb(10),l.ac("ngForOf",o.validation_messages.personaTipoIdentificacion),l.xb(6),l.ac("ngForOf",o.validation_messages.personaIdentificacion),l.xb(1),l.ac("disabled",!o.form_persona.valid),l.xb(2),l.ac("ngIf",o.registrarPersona),l.xb(1),l.ac("ngIf",o.formularioCompleto))},directives:[s.r,s.O,s.h,s.d,s.e,s.N,s.p,s.q,s.I,s.o,n.m,n.i,n.d,s.x,s.y,s.K,s.V,n.h,n.c,s.L,i.i,s.w,s.W,s.g,i.j,s.M,s.s,f.a,s.z,s.n,s.a,n.j],styles:[""]}),e})()}];let A=(()=>{class e{}return e.\u0275mod=l.Gb({type:e}),e.\u0275inj=l.Fb({factory:function(o){return new(o||e)},imports:[[t.i.forChild(k)],t.i]}),e})();var O=r("ONSf");let T=(()=>{class e{}return e.\u0275mod=l.Gb({type:e}),e.\u0275inj=l.Fb({factory:function(o){return new(o||e)},providers:[],imports:[[i.b,n.e,s.P,A,O.a,n.k]]}),e})()}}]);