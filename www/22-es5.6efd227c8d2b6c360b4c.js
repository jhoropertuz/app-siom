!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var r=0;r<o.length;r++){var i=o[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{oXFs:function(r,i,n){"use strict";n.r(i),n.d(i,"RecogerOxigemPageModule",(function(){return R}));var a=n("ofXK"),t=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),l=n("mrSG"),b=n("gcOT"),p=n("fXoL"),u=n("qMNJ"),f=n("6uu6"),m=n("fBZb"),d=n("aOlj"),g=n("Gdqo"),h=n("ZkMX");function N(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function v(e,o){if(1&e&&(p.Lb(0),p.kc(1,N,3,1,"ion-text",17),p.Kb()),2&e){var r=o.$implicit,i=p.Xb();p.xb(1),p.ac("ngIf",i.form_persona.get("personaTipoIdentificacion").hasError(r.type)&&(i.form_persona.get("personaTipoIdentificacion").dirty||i.form_persona.get("personaTipoIdentificacion").touched))}}function M(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function _(e,o){if(1&e&&(p.Lb(0),p.kc(1,M,3,1,"ion-text",20),p.Kb()),2&e){var r=o.$implicit,i=p.Xb();p.xb(1),p.ac("ngIf",i.form_persona.get("personaIdentificacion").hasError(r.type)&&(i.form_persona.get("personaIdentificacion").dirty||i.form_persona.get("personaIdentificacion").touched))}}function x(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function y(e,o){if(1&e&&(p.Lb(0),p.kc(1,x,3,1,"ion-text",20),p.Kb()),2&e){var r=o.$implicit,i=p.Xb(2);p.xb(1),p.ac("ngIf",i.form_registrar_persona.get("personaNombres").hasError(r.type)&&(i.form_registrar_persona.get("personaNombres").dirty||i.form_registrar_persona.get("personaNombres").touched))}}function I(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function E(e,o){if(1&e&&(p.Lb(0),p.kc(1,I,3,1,"ion-text",20),p.Kb()),2&e){var r=o.$implicit,i=p.Xb(2);p.xb(1),p.ac("ngIf",i.form_registrar_persona.get("personaApellidos").hasError(r.type)&&(i.form_registrar_persona.get("personaApellidos").dirty||i.form_registrar_persona.get("personaApellidos").touched))}}function C(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function q(e,o){if(1&e&&(p.Lb(0),p.kc(1,C,3,1,"ion-text",20),p.Kb()),2&e){var r=o.$implicit,i=p.Xb(2);p.xb(1),p.ac("ngIf",i.form_registrar_persona.get("personaCelular").hasError(r.type)&&(i.form_registrar_persona.get("personaCelular").dirty||i.form_registrar_persona.get("personaCelular").touched))}}function w(e,o){if(1&e&&(p.Nb(0,"ion-text",18),p.Jb(1,"ion-icon",19),p.lc(2),p.Mb()),2&e){var r=p.Xb().$implicit;p.xb(2),p.nc(" ",r.message," ")}}function S(e,o){if(1&e&&(p.Lb(0),p.kc(1,w,3,1,"ion-text",20),p.Kb()),2&e){var r=o.$implicit,i=p.Xb(2);p.xb(1),p.ac("ngIf",i.form_registrar_persona.get("personaCorreoElectronico").hasError(r.type)&&(i.form_registrar_persona.get("personaCorreoElectronico").dirty||i.form_registrar_persona.get("personaCorreoElectronico").touched))}}function k(e,o){if(1&e&&(p.Nb(0,"ion-grid"),p.Nb(1,"ion-row"),p.Nb(2,"ion-col",5),p.Nb(3,"strong"),p.lc(4,"Datos Persona "),p.Mb(),p.Mb(),p.Mb(),p.Nb(5,"ion-row"),p.Nb(6,"ion-col",6),p.Nb(7,"form",21),p.Nb(8,"ion-item"),p.Nb(9,"ion-label",8),p.lc(10,"Nombres"),p.Mb(),p.Jb(11,"ion-input",22),p.Mb(),p.Nb(12,"div",12),p.kc(13,y,2,1,"ng-container",13),p.Mb(),p.Nb(14,"ion-item"),p.Nb(15,"ion-label",8),p.lc(16,"Apellidos"),p.Mb(),p.Jb(17,"ion-input",23),p.Mb(),p.Nb(18,"div",12),p.kc(19,E,2,1,"ng-container",13),p.Mb(),p.Nb(20,"ion-item"),p.Nb(21,"ion-label",8),p.lc(22,"Numero celular"),p.Mb(),p.Jb(23,"ion-input",24),p.Mb(),p.Nb(24,"div",12),p.kc(25,q,2,1,"ng-container",13),p.Mb(),p.Nb(26,"ion-item"),p.Nb(27,"ion-label",8),p.lc(28,"Correo electronico"),p.Mb(),p.Jb(29,"ion-input",25),p.Mb(),p.Nb(30,"div",12),p.kc(31,S,2,1,"ng-container",13),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&e){var r=p.Xb();p.xb(7),p.ac("formGroup",r.form_registrar_persona),p.xb(6),p.ac("ngForOf",r.validation_messages.personaNombres),p.xb(6),p.ac("ngForOf",r.validation_messages.personaApellidos),p.xb(6),p.ac("ngForOf",r.validation_messages.personaCelular),p.xb(6),p.ac("ngForOf",r.validation_messages.personaCorreoElectronico)}}function A(e,o){if(1&e){var r=p.Ob();p.Nb(0,"ion-grid"),p.Nb(1,"ion-row"),p.Nb(2,"ion-col",5),p.Nb(3,"p"),p.lc(4,"Firma"),p.Mb(),p.Nb(5,"app-firma",26),p.Vb("firmaBase64Event",(function(e){return p.hc(r),p.Xb().firmaBase64Event(e)})),p.Mb(),p.Mb(),p.Mb(),p.Nb(6,"ion-row"),p.Nb(7,"ion-col",5),p.Nb(8,"ion-list"),p.Nb(9,"ion-item"),p.Nb(10,"ion-label"),p.lc(11,"Nos autoriza para utilizar su firma en los procesos necesarios del servicio."),p.Mb(),p.Nb(12,"ion-checkbox",27),p.Vb("ngModelChange",(function(e){return p.hc(r),p.Xb().permisosFirma=e}))("ionChange",(function(){return p.hc(r),p.Xb().permisoFirma()})),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(13,"ion-row",28),p.Nb(14,"ion-col",5),p.Nb(15,"ion-button",29),p.Vb("click",(function(){return p.hc(r),p.Xb().recogido()})),p.lc(16," Recogido "),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&e){var i=p.Xb();p.xb(12),p.ac("ngModel",i.permisosFirma),p.xb(3),p.ac("disabled",!i.form_registrar_persona.valid)}}var O,T,X,P=[{path:"",component:(O=function(){function r(o,i,n,a,t,s,c,l){e(this,r),this.DatosServicioService=o,this.AuthService=i,this.formBuilder=n,this.DatosEquiposService=a,this.Router=t,this.BaseService=s,this.Sweetalert=c,this.ActivatedRoute=l,this.codigo="xxxx",this.coordenadas={lat:0,lng:0},this.registrarPersona=!1,this.formularioCompleto=!1,this.personaId="",this.permisosFirma=!1,this.validation_messages={personaTipoIdentificacion:[{type:"required",message:"Tipo de identificaci\xf3n es requerido."}],personaIdentificacion:[{type:"required",message:"Identificaci\xf3n es requerida."}],personaNombres:[{type:"required",message:"Nombres es requerida."}],personaApellidos:[{type:"required",message:"Apellidos es requerida."}],personaCelular:[{type:"required",message:"Celular es requerida."}],personaCorreoElectronico:[{type:"required",message:"Correo es requerida."}]}}var i,n,a;return i=r,(n=[{key:"ngOnInit",value:function(){var e=this;this.equipos=this.DatosEquiposService.getEquipos(),this.equipos.length?(console.log("ingresando a recoger"),console.log(this.equipos)):(this.Sweetalert.notificacion("info","Datos Insuficientes."),this.Router.navigateByUrl("menu-principal")),this.form_persona=this.formBuilder.group({personaTipoIdentificacion:new t.b("1",t.l.compose([t.l.required])),personaIdentificacion:new t.b("",t.l.compose([t.l.required]))}),this.form_registrar_persona=this.formBuilder.group({personaNombres:new t.b("",t.l.compose([t.l.required])),personaApellidos:new t.b("",t.l.compose([t.l.required])),personaCelular:new t.b("",t.l.compose([t.l.required])),personaCorreoElectronico:new t.b("",t.l.compose([t.l.required]))}),b.a.Geolocation.getCurrentPosition().then((function(o){console.log(o),e.coordenadas.lat=o.coords.latitude,e.coordenadas.lng=o.coords.longitude})),this.form_persona.get("personaIdentificacion").valueChanges.subscribe((function(o){e.registrarPersona=!1,e.formularioCompleto=!1}))}},{key:"irRuta",value:function(e){this.Router.navigateByUrl(e)}},{key:"buscarPersona",value:function(e){var o=this;this.registrarPersona=!1,this.formularioCompleto=!1;var r=this.BaseService.presentLoading();this.BaseService.postJson("personas","directorio","validarExistenciaPersonaApi",e).subscribe((function(e){console.log(e),"EXITO"==e.RESPUESTA?(o.formularioCompleto=!0,o.registrarPersona=!0,o.personaId=e.DATOS.personaId,o.form_registrar_persona.controls.personaNombres.setValue(e.DATOS.personaNombres),o.form_registrar_persona.controls.personaApellidos.setValue(e.DATOS.personaApellidos),o.form_registrar_persona.controls.personaCelular.setValue(e.DATOS.personaCelular),o.form_registrar_persona.controls.personaCorreoElectronico.setValue(e.DATOS.personaCorreoElectronico)):"INFO"==e.RESPUESTA?(o.formularioCompleto=!0,o.registrarPersona=!0,o.personaId="",o.form_registrar_persona.controls.personaNombres.setValue(""),o.form_registrar_persona.controls.personaApellidos.setValue(""),o.form_registrar_persona.controls.personaCelular.setValue(""),o.form_registrar_persona.controls.personaCorreoElectronico.setValue("")):(o.Sweetalert.modal("error",e.MENSAJE),o.personaId=""),r.then((function(e){e.dismiss()}))}))}},{key:"takePicture",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.Camera.getPhoto({quality:90,allowEditing:!0,resultType:b.a.CameraResultType.Uri});case 2:o=e.sent,console.log(o);case 4:case"end":return e.stop()}}),e)})))}},{key:"recogido",value:function(){var e=this;if(this.permisosFirma&&this.firmaBase64&&this.equipos.length>0){var o=Object.assign(this.form_registrar_persona.value,this.form_persona.value);o.personaId=this.personaId;var r=this.equipos.map((function(e){return{equipoID:e.equipoId,clienteID:e.clienteId,clientePersona:e.clientePersona,estadoEntregaEquipo:e.estadoEntregaEquipo,reciboReferencia:e.reciboReferencia}})),i={firmaBase64:this.firmaBase64,coordenadas:this.coordenadas,equipos:r,persona:o};console.log(i);var n=this.BaseService.presentLoading();this.BaseService.postJson("repartidores","recogerEquipos","registrarRecogidaEquipos",i).subscribe((function(o){console.log(o),(o.RESPUESTA="EXITO")?(e.DatosEquiposService.deleteEquipos(),e.Sweetalert.notificacion("success","Recolecci\xf3n exitosa"),e.DatosServicioService.setRecibosServico(o.DATOS),e.Router.navigateByUrl("recibos-servicios")):e.Sweetalert.modal("error",o.MENSAJE),n.then((function(e){e.dismiss()}))}))}else this.Sweetalert.modal("info","Datos insuficientes para la operaci\xf3n.")}},{key:"firmaBase64Event",value:function(e){this.firmaBase64=e}},{key:"permisoFirma",value:function(){console.log(this.permisosFirma)}}])&&o(i.prototype,n),a&&o(i,a),r}(),O.\u0275fac=function(e){return new(e||O)(p.Ib(u.a),p.Ib(f.a),p.Ib(t.a),p.Ib(m.a),p.Ib(c.g),p.Ib(d.a),p.Ib(g.a),p.Ib(c.a))},O.\u0275cmp=p.Cb({type:O,selectors:[["app-recoger-oxigem"]],decls:39,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["icon","chevron-back","defaultHref",""],[3,"fullscreen"],["size","12",2,"text-align","center"],["size","12"],["size","12",1,"text-center"],[3,"formGroup","ngSubmit"],["position","floating","color","primary"],["formControlName","personaTipoIdentificacion","placeholder","Seleccione"],["value","1"],["value","2"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","formControlName","personaIdentificacion"],["color","primary","expand","full","type","submit",1,"submit-btn",2,"margin-top","50px",3,"disabled"],[4,"ngIf"],["color","danger","style","display:block;float: none;\n                  width: 100%","class","error-message",4,"ngIf"],["color","danger",1,"error-message",2,"display","block","float","none","width","100%"],["name","information-circle-outline"],["color","danger","style","display:block;float: none;\n                width: 100%","class","error-message",4,"ngIf"],[3,"formGroup"],["type","text","formControlName","personaNombres"],["type","text","formControlName","personaApellidos"],["type","text","formControlName","personaCelular"],["type","text","formControlName","personaCorreoElectronico"],[3,"firmaBase64Event"],["slot","start","color","success",3,"ngModel","ngModelChange","ionChange"],[2,"margin-bottom","20%"],["expand","block","shape","round","color","success",3,"disabled","click"]],template:function(e,o){1&e&&(p.Nb(0,"ion-header",0),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-buttons",1),p.Jb(3,"ion-back-button",2),p.Mb(),p.Nb(4,"ion-title"),p.lc(5,"Recoger Equipo"),p.Mb(),p.Mb(),p.Mb(),p.Nb(6,"ion-content",3),p.Lb(7),p.Nb(8,"ion-grid"),p.Nb(9,"ion-row"),p.Nb(10,"ion-col",4),p.lc(11),p.Mb(),p.Mb(),p.Nb(12,"ion-row"),p.Nb(13,"ion-col",5),p.Nb(14,"strong"),p.lc(15,"Persona que entrega los equipos."),p.Mb(),p.Mb(),p.Mb(),p.Nb(16,"ion-row"),p.Nb(17,"ion-col",6),p.Nb(18,"form",7),p.Vb("ngSubmit",(function(){return o.buscarPersona(o.form_persona.value)})),p.Nb(19,"ion-item"),p.Nb(20,"ion-label",8),p.lc(21,"Tipo identificaci\xf3n"),p.Mb(),p.Nb(22,"ion-select",9),p.Nb(23,"ion-select-option",10),p.lc(24,"CC"),p.Mb(),p.Nb(25,"ion-select-option",11),p.lc(26,"NIT"),p.Mb(),p.Mb(),p.Mb(),p.Nb(27,"div",12),p.kc(28,v,2,1,"ng-container",13),p.Mb(),p.Nb(29,"ion-item"),p.Nb(30,"ion-label",8),p.lc(31,"Identificaci\xf3n"),p.Mb(),p.Jb(32,"ion-input",14),p.Mb(),p.Nb(33,"div",12),p.kc(34,_,2,1,"ng-container",13),p.Mb(),p.Nb(35,"ion-button",15),p.lc(36,"Buscar"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.kc(37,k,32,5,"ion-grid",16),p.kc(38,A,17,2,"ion-grid",16),p.Kb(),p.Mb()),2&e&&(p.xb(6),p.ac("fullscreen",!0),p.xb(5),p.nc(" ",o.equipos.length," Equipos a recoger "),p.xb(7),p.ac("formGroup",o.form_persona),p.xb(10),p.ac("ngForOf",o.validation_messages.personaTipoIdentificacion),p.xb(6),p.ac("ngForOf",o.validation_messages.personaIdentificacion),p.xb(1),p.ac("disabled",!o.form_persona.valid),p.xb(2),p.ac("ngIf",o.registrarPersona),p.xb(1),p.ac("ngIf",o.formularioCompleto))},directives:[s.r,s.O,s.h,s.d,s.e,s.N,s.p,s.q,s.I,s.o,t.m,t.i,t.d,s.x,s.y,s.K,s.V,t.h,t.c,s.L,a.i,s.w,s.W,s.g,a.j,s.M,s.s,h.a,s.z,s.n,s.a,t.j],styles:[""]}),O)}],B=((T=function o(){e(this,o)}).\u0275mod=p.Gb({type:T}),T.\u0275inj=p.Fb({factory:function(e){return new(e||T)},imports:[[c.i.forChild(P)],c.i]}),T),F=n("ONSf"),R=((X=function o(){e(this,o)}).\u0275mod=p.Gb({type:X}),X.\u0275inj=p.Fb({factory:function(e){return new(e||X)},providers:[],imports:[[a.b,t.e,s.P,B,F.a,t.k]]}),X)}}])}();